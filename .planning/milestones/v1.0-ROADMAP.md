# Milestone v1.0: Foundation

**Status:** ✅ SHIPPED 2026-02-03
**Phases:** 0-5
**Total Plans:** 2 (formels) + 4 phases pre-GSD

## Overview

Premier milestone Nilink : construction du moteur forensique, API REST/WebSocket, tests, production hardening, et deploiement cloud Railway. De l'initialisation au deploiement production en 2 jours.

## Phases

### Phase 0: Project Setup

**Goal**: Initialiser le projet avec PROJECT.md, config GSD, et repo Git
**Depends on**: None
**Plans**: Pre-GSD (pas de plan formel)

**Details:**
- PROJECT.md cree avec vision, requirements, contexte
- config.json avec preferences workflow (YOLO, standard depth, parallel)
- Git repo initialise

### Phase 1: Core Engine

**Goal**: Implementer le moteur forensique NilinkVerifierEngine avec 4 detecteurs
**Depends on**: Phase 0
**Plans**: Pre-GSD (pas de plan formel)

**Details:**
- `Nilink_engine.py` implemente (~980 lignes)
- 4 detecteurs : ELA, FFT, rPPG, Noise consistency (upscaling)
- Pipeline async avec frame dropping
- Detection visage OpenCV Haar
- Output: score 0-1, anomalies, heatmap, regions
- Modes demo: synthetic, image, webcam

### Phase 2: API Layer

**Goal**: Exposer le moteur via API REST et WebSocket
**Depends on**: Phase 1
**Plans**: Pre-GSD (pas de plan formel)

**Details:**
- FastAPI REST endpoints: POST /verify, /verify/base64, /verify/batch
- WebSocket endpoint: /ws/stream
- Health check: GET /health
- Serialisation JSON, gestion erreurs, validation input
- CORS middleware

### Phase 3: Testing & Validation

**Goal**: Creer une suite de tests couvrant engine et API
**Depends on**: Phase 2
**Plans**: Pre-GSD (pas de plan formel)

**Details:**
- 26 tests unitaires engine (4 detecteurs, pipeline, stream, edge cases)
- 14 tests API (REST + WebSocket endpoints)
- Fix seuils detection (ELA/upscaling pour images uniformes)
- Compatibilite Python 3.14 (asyncio)

### Phase 4: Production Hardening

**Goal**: Preparer l'application pour la production
**Depends on**: Phase 3
**Plans**: Pre-GSD (pas de plan formel)

**Details:**
- Configuration centralisee (config.py + pydantic-settings + .env.example)
- Logging structure JSON (logging_config.py + middleware request_id)
- Rate limiting par IP (slowapi — 60/min verify, 10/min batch)
- Docker containerization (Dockerfile + .dockerignore)
- Documentation API enrichie (tags, exemples, schemas erreurs)
- .gitignore ajoute

### Phase 5: Deploiement Cloud Railway

**Goal**: Deployer l'API Nilink sur Railway avec CI/CD, HTTPS, monitoring
**Depends on**: Phase 4
**Plans**: 2/2 complete

Plans:
- [x] 05-01: Preparer le codebase pour Railway (Dockerfile CMD shell form + railway.toml)
- [x] 05-02: Deployer sur Railway et verifier (creation projet, CI/CD, tests endpoints)

**Details:**
- Dockerfile CMD shell-form pour expansion $PORT Railway
- railway.toml (builder DOCKERFILE, healthcheck /health, restart ON_FAILURE)
- Deploiement Railway avec HTTPS automatique
- CI/CD GitHub push-to-deploy
- Health monitoring actif
- Documentation Swagger deployee sur /docs

---

## Milestone Summary

**Key Decisions:**
- Pas de ML lourd pour v1 (performance temps reel prioritaire)
- 4 detecteurs hybrides (ELA/FFT/rPPG/upscaling)
- OpenCV Haar pour detection visage
- REST + WebSocket (images ponctuelles + video temps reel)
- Frame dropping actif (latence constante)
- pydantic-settings pour config centralisee
- slowapi pour rate limiting
- JSON logging pour monitoring
- Shell-form CMD Docker pour Railway
- Railway Hobby plan ($5/mois)

**Issues Resolved:**
- "Application Failed to Respond" Railway — fix CMD exec form -> shell form
- Seuils ELA/upscaling trop sensibles sur images uniformes — ajustes
- Compatibilite Python 3.14 asyncio — adapte

**Issues Deferred:**
- Performance production ~1.9s/frame vs target 66ms (Railway Hobby CPU shared)
- CORS_ORIGINS = "*" permissif (acceptable demo, a configurer production)

**Technical Debt Incurred:**
- Fonctions demo (webcam, image, synthetic) non testees automatiquement
- Phases 0-4 sans VERIFICATION.md formelle (pre-GSD)

---

_For current project status, see .planning/PROJECT.md_
